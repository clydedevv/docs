---
title: "Dynamic Fees API Reference"
description: "Complete API reference for the Dynamic Fees module"
---

# API Reference

This document provides a complete API reference for the Dynamic Fees module, including gRPC endpoints, REST API, and message definitions.

## gRPC Endpoints

### Query Service

The Dynamic Fees module exposes the following gRPC query endpoints:

#### Params

Query the current module parameters including asset price registry.

**Endpoint:** `neutron.dynamicfees.Query/Params`

**Request:**
```protobuf
message QueryParamsRequest {}
```

**Response:**
```protobuf
message QueryParamsResponse {
  // params holds all the parameters of this module.
  Params params = 1 [(gogoproto.nullable) = false];
}
```

**Example:**
```bash
grpcurl -plaintext localhost:9090 neutron.dynamicfees.Query/Params
```

**Response Example:**
```json
{
  "params": {
    "ntrnPrices": [
      {
        "denom": "uatom",
        "amount": "0.150000000000000000"
      },
      {
        "denom": "uosmo",
        "amount": "0.080000000000000000"
      }
    ]
  }
}
```

## REST API Endpoints

### Query Parameters

**Endpoint:** `GET /neutron/dynamicfees/params`

**Description:** Retrieve current module parameters

**Response:**
```json
{
  "params": {
    "ntrn_prices": [
      {
        "denom": "string",
        "amount": "string"
      }
    ]
  }
}
```

**Example:**
```bash
curl http://localhost:1317/neutron/dynamicfees/params
```

## Message Types

### MsgUpdateParams

Updates the module parameters through governance.

```protobuf
message MsgUpdateParams {
  option (amino.name) = "dynamicfees/MsgUpdateParams";
  option (cosmos.msg.v1.signer) = "authority";

  // Authority is the address of the governance account.
  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];

  // params defines the x/dynamicfees parameters to update.
  Params params = 2 [
    (gogoproto.nullable) = false,
    (amino.dont_omitempty) = true
  ];
}
```

**Response:**
```protobuf
message MsgUpdateParamsResponse {}
```

**Usage Example:**
```json
{
  "@type": "/neutron.dynamicfees.MsgUpdateParams",
  "authority": "neutron10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn",
  "params": {
    "ntrn_prices": [
      {
        "denom": "uatom",
        "amount": "0.150000000000000000"
      }
    ]
  }
}
```

## Parameter Definitions

### Params

```protobuf
message Params {
  // List of asset prices by the NTRN
  // it's used in cooperation with feemarket module
  // ntrn_prices is a data source to convert gas_price from feemarket's base_denom (untrn)
  // into a given asset
  repeated cosmos.base.v1beta1.DecCoin ntrn_prices = 1;
}
```

**Fields:**

| Field | Type | Description |
|-------|------|-------------|
| `ntrn_prices` | []DecCoin | Array of asset prices denominated in NTRN |

### DecCoin Structure

```protobuf
message DecCoin {
  string denom = 1;
  string amount = 2;
}
```

**Fields:**

| Field | Type | Description |
|-------|------|-------------|
| `denom` | string | Asset denomination (e.g., "uatom", "uosmo") |
| `amount` | string | Price as decimal string (e.g., "0.150000000000000000") |

## Error Codes

### Module-Specific Errors

| Code | Name | Description |
|------|------|-------------|
| 1 | `ErrUnknownDenom` | Requested denomination not found in price registry |

**Error Response Format:**
```json
{
  "code": 1,
  "codespace": "dynamicfees", 
  "message": "unknown denom: ujuno"
}
```

## CLI Commands

### Query Commands

#### Query Params

```bash
neutrond query dynamicfees params [flags]
```

**Flags:**
- `--height int`: Use a specific height to query state at (this can error if the node is pruning state)
- `--help`: Help for params
- `--node string`: \<host\>:\<port\> to Tendermint RPC interface for this chain (default "tcp://localhost:26657")
- `--output string`: Output format (text|json) (default "text")

**Example:**
```bash
neutrond query dynamicfees params --output json
```

**Output:**
```json
{
  "params": {
    "ntrn_prices": [
      {
        "denom": "uatom",
        "amount": "0.150000000000000000"
      }
    ]
  }
}
```

### Transaction Commands

The Dynamic Fees module does not provide direct transaction commands. All parameter updates must be performed through governance proposals using the standard governance module commands.

## Integration Interfaces

### DenomResolver Interface

The Dynamic Fees module implements the `feemarkettypes.DenomResolver` interface:

```go
type DenomResolver interface {
    ConvertToDenom(ctx sdk.Context, fromCoin sdk.DecCoin, toDenom string) (sdk.DecCoin, error)
    ExtraDenoms(ctx sdk.Context) ([]string, error)
}
```

#### ConvertToDenom

Converts between denominations using the price registry.

**Parameters:**
- `ctx`: SDK context
- `fromCoin`: Source coin with amount and denomination
- `toDenom`: Target denomination

**Returns:**
- `sdk.DecCoin`: Converted coin amount
- `error`: Error if conversion fails

**Conversion Examples:**

```go
// NTRN to ATOM
fromCoin := sdk.NewDecCoinFromDec("untrn", sdk.NewDec(15))
result, err := keeper.ConvertToDenom(ctx, fromCoin, "uatom")
// Result: 100 uatom (if 1 ATOM = 0.15 NTRN)

// ATOM to NTRN  
fromCoin := sdk.NewDecCoinFromDec("uatom", sdk.NewDec(100))
result, err := keeper.ConvertToDenom(ctx, fromCoin, "untrn")
// Result: 15 untrn
```

#### ExtraDenoms

Returns list of supported denominations beyond the base denomination.

**Parameters:**
- `ctx`: SDK context

**Returns:**
- `[]string`: Array of supported denomination strings
- `error`: Error if query fails

**Example:**
```go
denoms, err := keeper.ExtraDenoms(ctx)
// Result: ["uatom", "uosmo", "ujuno"]
```

## Event Types

The Dynamic Fees module emits standard parameter change events when parameters are updated through governance.

### Parameter Change Event

**Type:** `message`

**Attributes:**
- `action`: `/neutron.dynamicfees.MsgUpdateParams`
- `module`: `dynamicfees`
- `sender`: Governance authority address

**Example Event:**
```json
{
  "type": "message",
  "attributes": [
    {
      "key": "action",
      "value": "/neutron.dynamicfees.MsgUpdateParams"
    },
    {
      "key": "module", 
      "value": "dynamicfees"
    },
    {
      "key": "sender",
      "value": "neutron10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn"
    }
  ]
}
```

## Client Libraries

### CosmJS Integration

```typescript
import { QueryClient } from "@cosmjs/stargate";

// Query parameters
async function queryDynamicFeesParams(client: QueryClient) {
  const response = await client.queryUnverified(
    "/neutron.dynamicfees.Query/Params",
    new Uint8Array()
  );
  return response;
}
```

### Go Client

```go
import (
    "github.com/neutron-org/neutron/v6/x/dynamicfees/types"
)

// Query parameters
func queryParams(ctx context.Context, client types.QueryClient) (*types.QueryParamsResponse, error) {
    req := &types.QueryParamsRequest{}
    return client.Params(ctx, req)
}
```

## Protobuf Definitions

### Service Definition

```protobuf
service Query {
  // Parameters queries the parameters of the module.
  rpc Params(QueryParamsRequest) returns (QueryParamsResponse) {
    option (google.api.http).get = "/neutron/dynamicfees/params";
  }
}

service Msg {
  // UpdateParams defines a governance operation for updating the x/dynamicfees module
  // parameters. The authority is hard-coded to the x/gov module account.
  rpc UpdateParams(MsgUpdateParams) returns (MsgUpdateParamsResponse);
}
```

### Import Statements

```protobuf
import "amino/amino.proto";
import "cosmos/base/v1beta1/coin.proto";
import "cosmos/msg/v1/msg.proto";
import "cosmos_proto/cosmos.proto";
import "gogoproto/gogo.proto";
import "google/api/annotations.proto";
```

This API reference provides complete information for integrating with the Dynamic Fees module programmatically.