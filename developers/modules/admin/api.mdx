---
title: "API"
description: "Complete API documentation for the admin module"
---

This document provides comprehensive API documentation for the admin module, including query endpoints, message types, events, and error codes.

<Warning>
**DAO-Only Access**: The admin module transaction operations can only be executed by the Main DAO contract through WebAssembly bindings. Individual users cannot directly submit these transactions via CLI or other means.
</Warning>

<Warning>
**DAO-Only Access**: The admin module transaction operations can only be executed by the Main DAO contract through WebAssembly bindings. Individual users cannot directly submit these transactions via CLI or other means.
</Warning>

## Query Endpoints

### Parameters

Get the current module parameters.

**Endpoint:** `GET /cosmos/adminmodule/adminmodule/params`

**Response:**
```json
{
  "params": {
    "admin_authority": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh",
    "whitelist_enabled": true,
    "max_proposal_size": "100",
    "proposal_authority": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"
  }
}
```

### Admins

List all current administrators.

**Endpoint:** `GET /cosmos/adminmodule/adminmodule/admins`

**Response:**
```json
{
  "admins": [
    "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"
  ]
}
```

### Whitelist

Get the list of whitelisted message types.

**Endpoint:** `GET /cosmos/adminmodule/adminmodule/whitelist`

**Response:**
```json
{
  "whitelisted_messages": [
    "/cosmos.bank.v1beta1.MsgSend",
    "/cosmwasm.wasm.v1.MsgInstantiateContract",
    "/cosmwasm.wasm.v1.MsgExecuteContract",
    "/neutron.cron.MsgUpdateParams",
    "/neutron.feeburner.MsgUpdateParams"
  ]
}
```

### Proposal

Get details of a specific proposal by ID.

**Endpoint:** `GET /cosmos/adminmodule/adminmodule/proposal/{proposal_id}`

**Parameters:**
- `proposal_id`: Unique identifier of the proposal

**Response:**
```json
{
  "proposal": {
    "id": "1",
    "messages": [
      {
        "@type": "/cosmos.bank.v1beta1.MsgSend",
        "from_address": "neutron1...",
        "to_address": "neutron1...",
        "amount": [{"denom": "untrn", "amount": "1000000"}]
      }
    ],
    "proposer": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh",
    "status": "executed",
    "submit_time": "2023-06-01T10:00:00Z",
    "execution_time": "2023-06-01T10:05:00Z"
  }
}
```

### Proposals

List all proposals with pagination support.

**Endpoint:** `GET /cosmos/adminmodule/adminmodule/proposals`

**Parameters:**
- `pagination.key` (optional): Pagination key for next page
- `pagination.offset` (optional): Number of items to skip
- `pagination.limit` (optional): Maximum number of items to return
- `pagination.count_total` (optional): Include total count in response

**Response:**
```json
{
  "proposals": [
    {
      "id": "1",
      "messages": [...],
      "proposer": "neutron1...",
      "status": "executed"
    },
    {
      "id": "2", 
      "messages": [...],
      "proposer": "neutron1...",
      "status": "pending"
    }
  ],
  "pagination": {
    "next_key": null,
    "total": "2"
  }
}
```

## Message Types (DAO-Only)

<Note>
The following message types can only be executed by the Main DAO contract through WebAssembly bindings. They are not available as CLI commands for individual users.
</Note>

### MsgSubmitProposal

Submit a proposal using the modern message-based format.

**Type:** `/cosmos.adminmodule.adminmodule.MsgSubmitProposal`

**Structure:**
```protobuf
message MsgSubmitProposal {
  repeated google.protobuf.Any messages = 1;
  string proposer = 2;
}
```

**WebAssembly Binding Usage:**
```rust
use neutron_sdk::bindings::msg::NeutronMsg;

let admin_msg = NeutronMsg::SubmitProposal {
    messages: vec![/* whitelisted sdk.Msg messages */],
};
```

### MsgSubmitProposalLegacy

Submit a legacy format proposal for backward compatibility.

**Type:** `/cosmos.adminmodule.adminmodule.MsgSubmitProposalLegacy`

**Structure:**
```protobuf
message MsgSubmitProposalLegacy {
  google.protobuf.Any content = 1;
  string proposer = 2;
}
```

### MsgAddAdmin

Add a new admin to the network (if admin management is enabled).

**Type:** `/cosmos.adminmodule.adminmodule.MsgAddAdmin`

**Structure:**
```protobuf
message MsgAddAdmin {
  string creator = 1;
  string admin = 2;
}
```

### MsgDeleteAdmin

Remove an existing admin from the network.

**Type:** `/cosmos.adminmodule.adminmodule.MsgDeleteAdmin`

**Structure:**
```protobuf
message MsgDeleteAdmin {
  string creator = 1;
  string admin = 2;
}
```

## Events

The admin module emits various events during operation for monitoring and audit purposes.

### ProposalSubmitted

Emitted when a new proposal is submitted by the Main DAO contract.

**Type:** `adminmodule.proposal_submitted`

**Attributes:**
- `proposal_id`: Unique identifier for the proposal
- `proposer`: Address of the proposal submitter (Main DAO contract)
- `message_count`: Number of messages in the proposal

**Example:**
```json
{
  "type": "adminmodule.proposal_submitted",
  "attributes": [
    {"key": "proposal_id", "value": "1"},
    {"key": "proposer", "value": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"},
    {"key": "message_count", "value": "2"}
  ]
}
```

### ProposalExecuted

Emitted when a proposal is successfully executed.

**Type:** `adminmodule.proposal_executed`

**Attributes:**
- `proposal_id`: The executed proposal identifier
- `executor`: Address that executed the proposal (Main DAO contract)
- `execution_time`: Timestamp of execution
- `gas_used`: Gas consumed during execution

**Example:**
```json
{
  "type": "adminmodule.proposal_executed",
  "attributes": [
    {"key": "proposal_id", "value": "1"},
    {"key": "executor", "value": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"},
    {"key": "execution_time", "value": "2023-06-01T12:00:00Z"},
    {"key": "gas_used", "value": "150000"}
  ]
}
```

### ProposalFailed

Emitted when a proposal execution fails.

**Type:** `adminmodule.proposal_failed`

**Attributes:**
- `proposal_id`: The failed proposal identifier
- `error`: Error message describing the failure
- `failed_message_index`: Index of the message that caused failure

**Example:**
```json
{
  "type": "adminmodule.proposal_failed",
  "attributes": [
    {"key": "proposal_id", "value": "1"},
    {"key": "error", "value": "insufficient funds"},
    {"key": "failed_message_index", "value": "1"}
  ]
}
```

### AdminAdded

Emitted when a new admin is added (if admin management is enabled).

**Type:** `adminmodule.admin_added`

**Attributes:**
- `admin`: Address of the newly added admin
- `added_by`: Address that added the admin (Main DAO contract)

**Example:**
```json
{
  "type": "adminmodule.admin_added",
  "attributes": [
    {"key": "admin", "value": "neutron1newadmin..."},
    {"key": "added_by", "value": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"}
  ]
}
```

### AdminRemoved

Emitted when an admin is removed.

**Type:** `adminmodule.admin_removed`

**Attributes:**
- `admin`: Address of the removed admin
- `removed_by`: Address that removed the admin (Main DAO contract)

**Example:**
```json
{
  "type": "adminmodule.admin_removed",
  "attributes": [
    {"key": "admin", "value": "neutron1oldadmin..."},
    {"key": "removed_by", "value": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"}
  ]
}
```

### WhitelistUpdated

Emitted when the message whitelist is updated.

**Type:** `adminmodule.whitelist_updated`

**Attributes:**
- `updated_by`: Address that updated the whitelist (Main DAO contract)
- `added_messages`: Messages added to whitelist
- `removed_messages`: Messages removed from whitelist

**Example:**
```json
{
  "type": "adminmodule.whitelist_updated",
  "attributes": [
    {"key": "updated_by", "value": "neutron1436kxs0w2es6xlqpp9rd35e3d0cjnw4sv8j3a7483sgks29jqwgshlt6zh"},
    {"key": "added_messages", "value": "/cosmos.bank.v1beta1.MsgSend"},
    {"key": "removed_messages", "value": ""}
  ]
}
```

## Error Codes

The admin module uses specific error codes for different failure scenarios:

| Code | Name | Description |
|------|------|-------------|
| 1 | `ErrUnauthorized` | Insufficient permissions for operation |
| 2 | `ErrInvalidMessage` | Message format or content is invalid |
| 3 | `ErrNotWhitelisted` | Message type not in whitelist |
| 4 | `ErrInvalidProposal` | Proposal structure is malformed |
| 5 | `ErrAdminExists` | Admin already exists (for add operations) |
| 6 | `ErrAdminNotFound` | Admin doesn't exist (for delete operations) |
| 7 | `ErrProposalNotFound` | Proposal with given ID not found |
| 8 | `ErrMaxProposalSize` | Proposal exceeds maximum allowed size |

## WebAssembly Integration

### DAO Contract Integration

The Main DAO contract integrates with the admin module using Neutron's WebAssembly bindings:

```rust
use neutron_sdk::bindings::msg::NeutronMsg;
use cosmwasm_std::{Response, CosmosMsg};

// Example: Submit a governance proposal from the Main DAO contract
pub fn submit_governance_proposal(
    messages: Vec<CosmosMsg>
) -> Result<Response, ContractError> {
    let admin_msg = NeutronMsg::SubmitProposal {
        messages: messages,
    };

    Ok(Response::new()
        .add_message(admin_msg)
        .add_attribute("action", "submit_governance_proposal"))
}
```

### Authority Verification

The admin module performs strict authority verification:

1. **Signer Verification**: Ensures messages come from the authorized Main DAO contract
2. **Message Validation**: Confirms all messages are properly formatted and whitelisted
3. **Permission Checking**: Verifies the sender has the required permissions

### Security Features

- **Whitelisting**: Only pre-approved message types can be executed
- **Access Control**: Strict authorization checks prevent unauthorized access
- **Audit Trail**: All operations are logged with comprehensive event emission
- **Atomic Execution**: Multi-message proposals execute atomically (all or nothing)

This API documentation provides complete coverage of the admin module's interface while emphasizing that all transaction operations must go through the democratic governance process via the Main DAO contract. 